-reconocimiento y escaneo
-escaneo y analisis de vulnerabilidades
-explotar vunerabilidades
-posexplotacion
-repetir y documentar
(powerSloit,Nishang)
(Posh-SecMod,PowerShell Empire)
(puede que sean reconocidos como malware)
. https://github.com/PowerShellMafia/PowerSploit
. https://github.com/darkoperator/Posh-SecMod
. https://github.com/samratashok/nishang

- Import-Module.\nishang-master\nishang.psm1
- Set-Execution Policy Unrestricted
- Get-ChildItem.\nishang-master\ -Recurse|Unblock-File (desbloquea todos los archivos de una carpeta de forma recursiva)
- Get-Command -Module nishang (o usar Show-command y buscarlo)
- Invoke-Portscan -StartAddress 192.168.10.1 -EndAddress 192.168.10.30 -ResolveHost
- Invoke-Portscan -StartAddress 192.168.10.10 -EndAddress 192.168.10.10 -ScanPort
-- Get-ChildItem .\Posh-SecMod-master\ -Recurse|Unblock-File
-- Import-Module .\Posh-SecMod-master\Posh-SecMod.psm1
(poshSecMod tiene sub modulos)
-- (carpeta \Discovery>) Import-Module.\Discovery.psm1
-- Get-Command -Module Discovery (o usar Show-command y buscarlo)
(un escaneo ARP si tienen cortafuegos e impiden la respuesta a ping)
-- Invoke-ARPScan -CIDR 192.168.10.0/24
(si dos metodos de diferentes modulos se llaman igual, solo permanecera el metodo del ultimo modulo añadido y se anulara el otro )
--- Get-ChildItem.\Posh-SecMod-master\ -Recurse|Unblock-File
--- Import-Module.\PowerSploit-master\Powersploit.psml
--- Get-Help Invoke-Portscan
--- Invoke-Portscan -Hosts maquinaremota
$RESULTADO Invoke-Portscan -Hosts dc.adatum.com
$RESULTADO|Select-object -ExpandProperty openPorts
--- Get-Command -Module powerSloit (o usar Show-command y buscarlo)
--- Get-HttpStatus -Target maquinaremota -Path .\PowerSploit-master\Recon\Dictionaries\generic.txt
(where-object(s.Status -match"ok"} busca)


uso de Shodan en powerShell
- https://www.shodan.io/
(interfaz we de:)
(buscador que escanea de forma permanente internet buscando servicios, maquinas,puertos,dispositivos conectados a internet y permite analizar sus vulnerabilidades)
(es de pago pero con una cuenta gratuita se puede usar algunas cosas)
(usar la API key que esta en my count una vez iniciada sesion)
- Import-Module.\Posh-Shodan-master\Posh-Shodan.psm1
- Get-Command -Module Posh-Shodan (o usar Show-command y buscarlo)
- Set-ShodanAPIKey -APIKey ....apikey.... -Master Password (Read-Host -AsSecureString)
(pedira introducir la contraseña y cifrara la apikey con esa contraseña)
(la gurdara de forma local en Senv:APPDATA)
-. cd $env:APPDATA
-. ls
-. Get-childItem.\Posh-Shodan\

(leerlo cada vez que queramos volver a usar shodan desde powershell)
- Read-ShodanAPIKey -Master Password(Read-Host -AsSecurString)
(para usar shodan, nos pedira la clave del cifrazo de la apikey)

- Measure-ShodanHost -Query RDP -City "Madrid"
- Search-ShodanHost -Query "SQ-WebCam"
- SWEBCAMS=Search-ShodanHost -Query "SQ-webcam"
- SWEBCAMS[0]|FL


Uso de Nmap en powerShell

- https://nmap.org/



